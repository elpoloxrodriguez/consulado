import{a as W,b as R,c as j,d as E,e as z,f as ie,g as oe,i as be,j as ne,k as we}from"./chunk-OT2M2KGO.js";import{b as q,c as Q,d as J,f as U,h as G,i as K,j as X,n as Y,o as Z,p as $,q as ee,r as te}from"./chunk-ZXV3WCDO.js";import{Ca as t,Cc as pe,Da as o,Ea as k,Fa as A,Ga as T,Ia as y,Ja as f,Ka as x,M as L,Qa as I,R as m,Ra as O,S as p,Sa as N,Sc as ue,Ta as D,Tc as he,Ua as a,Uc as ge,Vc as _e,Wa as V,Wc as fe,Ya as C,Za as S,_a as b,ab as F,bb as M,ea as d,fa as H,ic as re,jc as ae,mc as le,nc as se,qc as de,rc as ce,sa as _,ua as h,uc as me,za as w}from"./chunk-QPT26XIT.js";import{a as B,e as Se,j as v}from"./chunk-DTJZBUUZ.js";var Ce=Se(be());var P=()=>({standalone:!0});function ve(r,c){r&1&&(A(0),t(1,"div",34),k(2,"div",35),t(3,"div",36),a(4,"Cargando datos por favor espere!.."),o()(),T())}function ye(r,c){r&1&&(A(0),t(1,"div",34)(2,"div",36),a(3,"No Hay Registros!.."),o()(),T())}function xe(r,c){if(r&1&&(t(0,"div")(1,"span",37),a(2),o()()),r&2){let u=c.value;d(2),V("",u," ")}}function Me(r,c){if(r&1&&(t(0,"div")(1,"span",37),a(2),o()()),r&2){let u=c.value;d(2),V("",u," ")}}function Ee(r,c){r&1&&(t(0,"c-badge",38),a(1,"Activo"),o())}function He(r,c){r&1&&(t(0,"c-badge",39),a(1,"Inactivo"),o())}function Ae(r,c){if(r&1&&(t(0,"div"),_(1,Ee,2,0,"c-badge",38)(2,He,2,0,"c-badge",39),o()),r&2){let u=c.value;d(),w(1,u==1?1:-1),d(),w(2,u==0?2:-1)}}function Te(r,c){if(r&1){let u=y();t(0,"c-badge",40),f("click",function(){let i=m(u).row,e=x();return p(e.Eliminar(i))}),a(1,"Eliminar"),o(),a(2," \xA0 "),t(3,"c-badge",41),f("click",function(){let i=m(u).row,e=x();return p(e.ModalActualizar("verticallyCenteredModal",i))}),a(4,"Actualziar"),o()}}function Ve(r,c){if(r&1){let u=y();t(0,"button",42),f("click",function(){m(u);let i=x();return p(i.Registrar())}),a(1,"Registrar Horario"),o()}}function Pe(r,c){if(r&1){let u=y();t(0,"button",43),f("click",function(){m(u);let i=x();return p(i.Actualizar())}),a(1,"Actualizar Horario"),o()}}var ze=(()=>{let c=class c{constructor(n,i){this.apiService=n,this.swal=i,this.selectedOption=10,this.ColumnMode=W,this.selected=[],this.xHorarios={nombre:"",status:void 0,llave:0},this.ListasHorarios=[],this.rows=[],this.temp=[],this.search="",this.xAPI={funcion:"",parametros:"",valores:{}},this.paises=[],this.status=[{id:1,name:"Activo"},{id:0,name:"Inactivo"}],this.loadingTable=0,this.btnShow=!1}ngOnInit(){return v(this,null,function*(){yield this.ListasHorario()})}ListasHorario(){return v(this,null,function*(){this.xAPI.funcion="MPPRE_R_Horario",this.xAPI.parametros="",this.xAPI.valores="",this.apiService.Ejecutar(this.xAPI).subscribe(n=>{n.Cuerpo.length>0?(this.loadingTable=1,n.Cuerpo.map(i=>{Array.isArray(this.ListasHorarios)&&this.ListasHorarios.push(i)}),this.rows=this.ListasHorarios,this.temp=this.rows):this.loadingTable=2},n=>{console.log(n)})})}filter(n){let i=n.target.value.toLowerCase(),e=this.temp.filter(function(s){});this.rows=e}Registrar(){return v(this,null,function*(){this.xAPI.funcion="MPPRE_C_Horario",this.xAPI.parametros="",this.xAPI.valores=JSON.stringify(this.xHorarios),yield this.apiService.Ejecutar(this.xAPI).subscribe({next:n=>{n.tipo==1?(this.swal.Swal1("top-end","success",`<h5><strong><font color="red">${this.xHorarios.nombre}</font></strong> </br> Registrado Exitosamente!</h5>`,3e3),this.ListasHorarios=[],this.rows=[],this.ListasHorario(),this.LimpiarFormulario(),this.closeModal("verticallyCenteredModal")):this.swal.SwalMini("top-end","error","Oops! Algo salio mal!...",3e3)},error:n=>{console.log(n)}})})}LimpiarFormulario(){this.xHorarios={id:0,llave:0,nombre:"",status:void 0}}closeModal(n){this.btnShow=!1;let i=document.getElementById(n),e=document.querySelector(".modal-backdrop");i&&e&&(i.style.display="none",e.remove(),this.LimpiarFormulario())}openModal(n){this.btnShow=!1;let i=document.getElementById(n);if(i){i.style.display="block",i.setAttribute("aria-hidden","false"),i.classList.add("show");let e=document.createElement("div");e.classList.add("modal-backdrop","show"),document.body.appendChild(e)}}ModalActualizar(n,i){this.xHorarios.id=i.id,this.btnShow=!0;let e=document.getElementById(n);if(this.xHorarios=i,e){e.style.display="block",e.setAttribute("aria-hidden","false"),e.classList.add("show");let s=document.createElement("div");s.classList.add("modal-backdrop","show"),document.body.appendChild(s)}}Eliminar(n){let i=B({},n);Ce.default.fire({title:"Est\xE1 seguro de eliminar?",html:`<strong><font color="red">${i.nombre}</font></strong>  </br> Tenga en cuenta que no podr\xE1s revertir esto!`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, Eliminalo!",cancelButtonText:"Cancelar"}).then(e=>{e.isConfirmed&&(this.xAPI.funcion="MPPRE_D_Horario",this.xAPI.parametros=`${i.id}`,this.xAPI.valores="",this.apiService.Ejecutar(this.xAPI).subscribe({next:s=>{s.tipo==1?(this.swal.Swal1("top-end","success",`<h5><strong><font color="red">${i.nombre}</font></strong> </br> Eliminado Exitosamente!</h5>`,3e3),this.ListasHorarios=[],this.rows=[],this.ListasHorario()):this.swal.SwalMini("top-end","error","Oops! Algo salio mal!...",3e3)},error:s=>{console.log(s),this.swal.SwalMini("top-end","error","Oops! Algo salio mal!...",3e3)}}))})}Actualizar(){return v(this,null,function*(){this.xAPI.funcion="MPPRE_U_Horario",this.xAPI.parametros="",this.xAPI.valores=JSON.stringify(this.xHorarios),yield this.apiService.Ejecutar(this.xAPI).subscribe({next:n=>{n.tipo==1?(this.swal.Swal1("top-end","success",`<h5><strong><font color="red">${this.xHorarios.nombre} </font></strong> </br> Actualizado Exitosamente!</h5>`,3e3),this.ListasHorarios=[],this.rows=[],this.ListasHorario(),this.LimpiarFormulario(),this.closeModal("verticallyCenteredModal")):this.swal.SwalMini("top-end","error","Oops! Algo salio mal!...",3e3)},error:n=>{console.log(n)}})})}};c.\u0275fac=function(i){return new(i||c)(H(ne),H(we))},c.\u0275cmp=L({type:c,selectors:[["app-schedules"]],viewQuery:function(i,e){if(i&1&&I(E,5),i&2){let s;O(s=N())&&(e.table=s.first)}},standalone:!0,features:[F],decls:64,vars:28,consts:[["verticallyCenteredModal",""],[1,"mb-4"],["size","sm","cButton","",3,"cModalToggle"],[1,"row"],[1,"col-md-6","col-12"],[1,"d-flex","justify-content-between","align-items-center","m-1"],[1,"d-flex","align-items-center"],[1,"form-control","mx-25",3,"ngModelChange","ngModel"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"col-md-6","col-12","d-flex","justify-content-start","justify-content-md-end"],[1,"d-flex","align-items-center","justify-content-end","pr-1","pb-1","pb-md-0"],[1,"d-flex","align-items-center","ml-1","ml-md-0"],["name","searchValue","type","search","placeholder","Buscar",1,"form-control","ml-25",3,"ngModelChange","keyup","search","ngModel"],["rowHeight","auto",1,"bootstrap","core-bootstrap",3,"rows","limit","columnMode","headerHeight","footerHeight","scrollbarH"],["name","Llave","prop","llave",3,"width"],["ngx-datatable-cell-template",""],["name","Nombre","prop","nombre",3,"width"],["name","Status","prop","status",3,"width"],["name","Accion",3,"sortable","width"],["size","lg","alignment","center","id","verticallyCenteredModal"],["cModalTitle",""],["cButtonClose","",3,"click"],[1,"row","mb-3"],[1,"col"],[1,"form-label"],["placeholder","Ingrese Llave","type","number",1,"form-control",3,"ngModelChange","ngModel","ngModelOptions"],["placeholder","Ingrese Nombre","type","text",1,"form-control",3,"ngModelChange","ngModel","ngModelOptions"],["optionValueField","id","optionTextField","name","placeholder","Seleccione Status","required","","autocomplete","off",3,"ngModelChange","items","ngModel","ngModelOptions"],["cButton","","color","danger",3,"click"],["cButton","","color","primary"],["cButton","","color","warning"],[1,"loading-overlay"],["role","status",1,"spinner-border"],[1,"loading-message"],[1,"font-weight-bold"],["color","success"],["color","danger"],["color","danger",3,"click"],["color","warning",3,"click"],["cButton","","color","primary",3,"click"],["cButton","","color","warning",3,"click"]],template:function(i,e){if(i&1){let s=y();t(0,"c-card",1)(1,"c-card-header"),a(2," Lista de Horarios "),t(3,"button",2),a(4,"Agregar Horario"),o()(),t(5,"c-card-body")(6,"div")(7,"div",3)(8,"div",4)(9,"div",5)(10,"label",6),a(11,"Mostrar "),t(12,"select",7),b("ngModelChange",function(l){return m(s),S(e.selectedOption,l)||(e.selectedOption=l),p(l)}),t(13,"option",8),a(14,"10"),o(),t(15,"option",9),a(16,"25"),o(),t(17,"option",10),a(18,"50"),o(),t(19,"option",11),a(20,"100"),o()(),a(21," Registros"),o()()(),t(22,"div",12)(23,"div",13)(24,"label",14),a(25,"Buscar:"),t(26,"input",15),b("ngModelChange",function(l){return m(s),S(e.search,l)||(e.search=l),p(l)}),f("keyup",function(l){return m(s),p(e.filter(l))})("search",function(l){return m(s),p(e.filter(l))}),o()()()()(),_(27,ve,5,0,"ng-container")(28,ye,4,0,"ng-container"),t(29,"ngx-datatable",16)(30,"ngx-datatable-column",17),_(31,xe,3,1,"ng-template",18),o(),t(32,"ngx-datatable-column",19),_(33,Me,3,1,"ng-template",18),o(),t(34,"ngx-datatable-column",20),_(35,Ae,3,2,"ng-template",18),o(),t(36,"ngx-datatable-column",21),_(37,Te,5,0,"ng-template",18),o()()()()(),t(38,"c-modal",22,0)(40,"c-modal-header")(41,"h5",23),a(42,"Formulario de Paises"),o(),t(43,"button",24),f("click",function(){return m(s),p(e.closeModal("verticallyCenteredModal"))}),o()(),t(44,"c-modal-body")(45,"form")(46,"div",25)(47,"div",26)(48,"label",27),a(49,"Llave"),o(),t(50,"input",28),b("ngModelChange",function(l){return m(s),S(e.xHorarios.llave,l)||(e.xHorarios.llave=l),p(l)}),o()(),t(51,"div",26)(52,"label",27),a(53,"Nombre"),o(),t(54,"input",29),b("ngModelChange",function(l){return m(s),S(e.xHorarios.nombre,l)||(e.xHorarios.nombre=l),p(l)}),o()(),t(55,"div",26)(56,"label",27),a(57,"Seleccione Estatus"),o(),t(58,"ngx-select",30),b("ngModelChange",function(l){return m(s),S(e.xHorarios.status,l)||(e.xHorarios.status=l),p(l)}),o()()()()(),t(59,"c-modal-footer")(60,"button",31),f("click",function(){return m(s),p(e.closeModal("verticallyCenteredModal"))}),a(61," Cerrar "),o(),_(62,Ve,2,0,"button",32)(63,Pe,2,0,"button",33),o()()}if(i&2){let s=D(39);d(3),h("cModalToggle",s.id),d(9),C("ngModel",e.selectedOption),d(14),C("ngModel",e.search),d(),w(27,e.loadingTable==0?27:-1),d(),w(28,e.loadingTable==2?28:-1),d(),h("rows",e.rows)("limit",e.selectedOption)("columnMode",e.ColumnMode.force)("headerHeight",50)("footerHeight",50)("scrollbarH",!0),d(),h("width",200),d(2),h("width",200),d(2),h("width",100),d(2),h("sortable",!1)("width",50),d(14),C("ngModel",e.xHorarios.llave),h("ngModelOptions",M(25,P)),d(4),C("ngModel",e.xHorarios.nombre),h("ngModelOptions",M(26,P)),d(4),h("items",e.status),C("ngModel",e.xHorarios.status),h("ngModelOptions",M(27,P)),d(4),w(62,e.btnShow?-1:62),d(),w(63,e.btnShow?63:-1)}},dependencies:[z,E,j,R,de,ae,oe,ie,me,te,K,Z,$,q,X,Y,Q,J,ee,G,U,ce,fe,_e,ue,ge,re,he,pe,se,le]});let r=c;return r})();export{ze as SchedulesComponent};
