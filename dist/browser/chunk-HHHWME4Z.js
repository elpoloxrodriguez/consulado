import{a as W,b as j,c as H,d as T,e as z,f as te,g as ie,i as be,j as oe,k as fe}from"./chunk-OT2M2KGO.js";import{b as q,c as Q,d as J,f as U,h as G,i as K,n as X,o as Y,p as Z,q as $,r as ee}from"./chunk-ZXV3WCDO.js";import{Ca as i,Cc as ce,Da as n,Ea as k,Fa as A,Ga as F,Ia as v,Ja as f,Ka as S,M as B,Qa as L,R as c,Ra as D,S as p,Sa as O,Sc as pe,Ta as N,Tc as ue,Ua as r,Uc as ge,Vc as he,Wa as V,Wc as _e,Ya as b,Za as x,_a as y,ab as R,bb as M,ea as m,fa as E,ic as ne,jc as ae,mc as re,nc as le,qc as se,rc as me,sa as _,ua as g,uc as de,za as w}from"./chunk-QPT26XIT.js";import{a as I,e as Ce,j as C}from"./chunk-DTJZBUUZ.js";var we=Ce(be());var P=()=>({standalone:!0});function xe(a,d){a&1&&(A(0),i(1,"div",34),k(2,"div",35),i(3,"div",36),r(4,"Cargando datos por favor espere!.."),n()(),F())}function ye(a,d){a&1&&(A(0),i(1,"div",34)(2,"div",36),r(3,"No Hay Registros!.."),n()(),F())}function ve(a,d){if(a&1&&(i(0,"div")(1,"span",37),r(2),n()()),a&2){let u=d.value;m(2),V("",u," ")}}function Se(a,d){if(a&1&&(i(0,"div")(1,"span",37),r(2),n()()),a&2){let u=d.value;m(2),V("",u," ")}}function Me(a,d){a&1&&(i(0,"c-badge",38),r(1,"Activo"),n())}function Te(a,d){a&1&&(i(0,"c-badge",39),r(1,"Inactivo"),n())}function Ee(a,d){if(a&1&&(i(0,"div"),_(1,Me,2,0,"c-badge",38)(2,Te,2,0,"c-badge",39),n()),a&2){let u=d.value;m(),w(1,u==1?1:-1),m(),w(2,u==0?2:-1)}}function Ae(a,d){if(a&1){let u=v();i(0,"c-badge",40),f("click",function(){let t=c(u).row,e=S();return p(e.Eliminar(t))}),r(1,"Eliminar"),n(),r(2," \xA0 "),i(3,"c-badge",41),f("click",function(){let t=c(u).row,e=S();return p(e.ModalActualizar("verticallyCenteredModal",t))}),r(4,"Actualziar"),n()}}function Fe(a,d){if(a&1){let u=v();i(0,"button",42),f("click",function(){c(u);let t=S();return p(t.Registrar())}),r(1,"Registrar Tramite"),n()}}function Ve(a,d){if(a&1){let u=v();i(0,"button",43),f("click",function(){c(u);let t=S();return p(t.Actualizar())}),r(1,"Actualizar Tramite"),n()}}var He=(()=>{let d=class d{constructor(o,t){this.apiService=o,this.swal=t,this.selectedOption=10,this.ColumnMode=W,this.selected=[],this.xTramites={nombre:"",status:void 0,id_dep:0},this.ListarTramite=[],this.rows=[],this.temp=[],this.search="",this.xAPI={funcion:"",parametros:"",valores:{}},this.departamento=[],this.paises=[],this.status=[{id:1,name:"Activo"},{id:0,name:"Inactivo"}],this.loadingTable=0,this.btnShow=!1}ngOnInit(){return C(this,null,function*(){yield this.ListaDepartamento(),yield this.ListasTramite()})}ListaDepartamento(){return C(this,null,function*(){this.xAPI.funcion="MPPRE_R_Departamento",this.xAPI.parametros="",this.xAPI.valores="",this.apiService.Ejecutar(this.xAPI).subscribe(o=>{if(o.Cuerpo.length>0)return this.departamento=o.Cuerpo.filter(t=>t.status===1)})})}ListasTramite(){return C(this,null,function*(){this.xAPI.funcion="MPPRE_R_Tramites",this.xAPI.parametros="",this.xAPI.valores="",this.apiService.Ejecutar(this.xAPI).subscribe(o=>{o.Cuerpo.length>0?(this.loadingTable=1,o.Cuerpo.map(t=>{Array.isArray(this.ListarTramite)&&this.ListarTramite.push(t)}),this.rows=this.ListarTramite,this.temp=this.rows):this.loadingTable=2},o=>{console.log(o)})})}filter(o){let t=o.target.value.toLowerCase(),e=this.temp.filter(function(s){});this.rows=e}Registrar(){return C(this,null,function*(){this.xAPI.funcion="MPPRE_C_Tramites",this.xAPI.parametros="",this.xAPI.valores=JSON.stringify(this.xTramites),yield this.apiService.Ejecutar(this.xAPI).subscribe({next:o=>{o.tipo==1?(this.swal.Swal1("top-end","success",`<h5><strong><font color="red">${this.xTramites.nombre}</font></strong> </br> Registrado Exitosamente!</h5>`,3e3),this.ListarTramite=[],this.rows=[],this.ListasTramite(),this.LimpiarFormulario(),this.closeModal("verticallyCenteredModal")):this.swal.SwalMini("top-end","error","Oops! Algo salio mal!...",3e3)},error:o=>{console.log(o)}})})}LimpiarFormulario(){this.xTramites={id:0,id_dep:0,nombre:"",status:void 0}}closeModal(o){this.btnShow=!1;let t=document.getElementById(o),e=document.querySelector(".modal-backdrop");t&&e&&(t.style.display="none",e.remove(),this.LimpiarFormulario())}openModal(o){this.btnShow=!1;let t=document.getElementById(o);if(t){t.style.display="block",t.setAttribute("aria-hidden","false"),t.classList.add("show");let e=document.createElement("div");e.classList.add("modal-backdrop","show"),document.body.appendChild(e)}}ModalActualizar(o,t){this.xTramites.id=t.id,this.btnShow=!0;let e=document.getElementById(o);if(this.xTramites=t,e){e.style.display="block",e.setAttribute("aria-hidden","false"),e.classList.add("show");let s=document.createElement("div");s.classList.add("modal-backdrop","show"),document.body.appendChild(s)}}Eliminar(o){let t=I({},o);we.default.fire({title:"Est\xE1 seguro de eliminar?",html:`<strong><font color="red">${t.nombre}</font></strong>  </br> Tenga en cuenta que no podr\xE1s revertir esto!`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, Eliminalo!",cancelButtonText:"Cancelar"}).then(e=>{e.isConfirmed&&(this.xAPI.funcion="MPPRE_D_Tramites",this.xAPI.parametros=`${t.id}`,this.xAPI.valores="",this.apiService.Ejecutar(this.xAPI).subscribe({next:s=>{s.tipo==1?(this.swal.Swal1("top-end","success",`<h5><strong><font color="red">${t.nombre}</font></strong> </br> Eliminado Exitosamente!</h5>`,3e3),this.ListarTramite=[],this.rows=[],this.ListasTramite()):this.swal.SwalMini("top-end","error","Oops! Algo salio mal!...",3e3)},error:s=>{console.log(s),this.swal.SwalMini("top-end","error","Oops! Algo salio mal!...",3e3)}}))})}Actualizar(){return C(this,null,function*(){this.xAPI.funcion="MPPRE_U_Tramites",this.xAPI.parametros="",this.xAPI.valores=JSON.stringify(this.xTramites),yield this.apiService.Ejecutar(this.xAPI).subscribe({next:o=>{o.tipo==1?(this.swal.Swal1("top-end","success",`<h5><strong><font color="red">${this.xTramites.nombre} </font></strong> </br> Actualizado Exitosamente!</h5>`,3e3),this.ListarTramite=[],this.rows=[],this.ListasTramite(),this.LimpiarFormulario(),this.closeModal("verticallyCenteredModal")):this.swal.SwalMini("top-end","error","Oops! Algo salio mal!...",3e3)},error:o=>{console.log(o)}})})}};d.\u0275fac=function(t){return new(t||d)(E(oe),E(fe))},d.\u0275cmp=B({type:d,selectors:[["app-formalities"]],viewQuery:function(t,e){if(t&1&&L(T,5),t&2){let s;D(s=O())&&(e.table=s.first)}},standalone:!0,features:[R],decls:66,vars:29,consts:[["verticallyCenteredModal",""],[1,"mb-4"],["size","sm","cButton","",3,"cModalToggle"],[1,"row"],[1,"col-md-6","col-12"],[1,"d-flex","justify-content-between","align-items-center","m-1"],[1,"d-flex","align-items-center"],[1,"form-control","mx-25",3,"ngModelChange","ngModel"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"col-md-6","col-12","d-flex","justify-content-start","justify-content-md-end"],[1,"d-flex","align-items-center","justify-content-end","pr-1","pb-1","pb-md-0"],[1,"d-flex","align-items-center","ml-1","ml-md-0"],["name","searchValue","type","search","placeholder","Buscar",1,"form-control","ml-25",3,"ngModelChange","keyup","search","ngModel"],["rowHeight","auto",1,"bootstrap","core-bootstrap",3,"rows","limit","columnMode","headerHeight","footerHeight","scrollbarH"],["name","Departamento","prop","departamento",3,"width"],["ngx-datatable-cell-template",""],["name","Nombre","prop","nombre",3,"width"],["name","Status","prop","status",3,"width"],["name","Accion",3,"sortable","width"],["size","lg","alignment","center","id","verticallyCenteredModal"],["cModalTitle",""],["cButtonClose","",3,"click"],[1,"row","mb-3"],[1,"col"],[1,"form-label"],["optionValueField","llave","optionTextField","nombre","placeholder","Seleccione Departamento","required","","autocomplete","off",3,"ngModelChange","items","ngModel","ngModelOptions"],["placeholder","Ingrese Nombre","type","text",1,"form-control",3,"ngModelChange","ngModel","ngModelOptions"],["optionValueField","id","optionTextField","name","placeholder","Seleccione Status","required","","autocomplete","off",3,"ngModelChange","items","ngModel","ngModelOptions"],["cButton","","color","danger",3,"click"],["cButton","","color","primary"],["cButton","","color","warning"],[1,"loading-overlay"],["role","status",1,"spinner-border"],[1,"loading-message"],[1,"font-weight-bold"],["color","success"],["color","danger"],["color","danger",3,"click"],["color","warning",3,"click"],["cButton","","color","primary",3,"click"],["cButton","","color","warning",3,"click"]],template:function(t,e){if(t&1){let s=v();i(0,"c-card",1)(1,"c-card-header"),r(2," Lista de Tramite "),i(3,"button",2),r(4,"Agregar Tramite"),n()(),i(5,"c-card-body")(6,"div")(7,"div",3)(8,"div",4)(9,"div",5)(10,"label",6),r(11,"Mostrar "),i(12,"select",7),y("ngModelChange",function(l){return c(s),x(e.selectedOption,l)||(e.selectedOption=l),p(l)}),i(13,"option",8),r(14,"10"),n(),i(15,"option",9),r(16,"25"),n(),i(17,"option",10),r(18,"50"),n(),i(19,"option",11),r(20,"100"),n()(),r(21," Registros"),n()()(),i(22,"div",12)(23,"div",13)(24,"label",14),r(25,"Buscar:"),i(26,"input",15),y("ngModelChange",function(l){return c(s),x(e.search,l)||(e.search=l),p(l)}),f("keyup",function(l){return c(s),p(e.filter(l))})("search",function(l){return c(s),p(e.filter(l))}),n()()()()(),_(27,xe,5,0,"ng-container")(28,ye,4,0,"ng-container"),i(29,"ngx-datatable",16)(30,"ngx-datatable-column",17),_(31,ve,3,1,"ng-template",18),n(),i(32,"ngx-datatable-column",19),_(33,Se,3,1,"ng-template",18),n(),i(34,"ngx-datatable-column",20),_(35,Ee,3,2,"ng-template",18),n(),i(36,"ngx-datatable-column",21),_(37,Ae,5,0,"ng-template",18),n()()()()(),i(38,"c-modal",22,0)(40,"c-modal-header")(41,"h5",23),r(42,"Formulario de Tramite"),n(),i(43,"button",24),f("click",function(){return c(s),p(e.closeModal("verticallyCenteredModal"))}),n()(),i(44,"c-modal-body")(45,"form")(46,"div",25)(47,"div",26)(48,"label",27),r(49,"Departamento"),n(),i(50,"ngx-select",28),y("ngModelChange",function(l){return c(s),x(e.xTramites.id_dep,l)||(e.xTramites.id_dep=l),p(l)}),n()()(),i(51,"div",25)(52,"div",26)(53,"label",27),r(54,"Nombre"),n(),i(55,"input",29),y("ngModelChange",function(l){return c(s),x(e.xTramites.nombre,l)||(e.xTramites.nombre=l),p(l)}),n()()(),i(56,"div",25)(57,"div",26)(58,"label",27),r(59,"Seleccione Estatus"),n(),i(60,"ngx-select",30),y("ngModelChange",function(l){return c(s),x(e.xTramites.status,l)||(e.xTramites.status=l),p(l)}),n()()()()(),i(61,"c-modal-footer")(62,"button",31),f("click",function(){return c(s),p(e.closeModal("verticallyCenteredModal"))}),r(63," Cerrar "),n(),_(64,Fe,2,0,"button",32)(65,Ve,2,0,"button",33),n()()}if(t&2){let s=N(39);m(3),g("cModalToggle",s.id),m(9),b("ngModel",e.selectedOption),m(14),b("ngModel",e.search),m(),w(27,e.loadingTable==0?27:-1),m(),w(28,e.loadingTable==2?28:-1),m(),g("rows",e.rows)("limit",e.selectedOption)("columnMode",e.ColumnMode.force)("headerHeight",50)("footerHeight",50)("scrollbarH",!0),m(),g("width",100),m(2),g("width",200),m(2),g("width",100),m(2),g("sortable",!1)("width",50),m(14),g("items",e.departamento),b("ngModel",e.xTramites.id_dep),g("ngModelOptions",M(26,P)),m(5),b("ngModel",e.xTramites.nombre),g("ngModelOptions",M(27,P)),m(5),g("items",e.status),b("ngModel",e.xTramites.status),g("ngModelOptions",M(28,P)),m(4),w(64,e.btnShow?-1:64),m(),w(65,e.btnShow?65:-1)}},dependencies:[z,T,H,j,se,ae,ie,te,de,ee,K,Y,Z,q,X,Q,J,$,G,U,me,_e,he,pe,ge,ne,ue,ce,le,re]});let a=d;return a})();export{He as FormalitiesComponent};
