import{a as j,b as N,c as H,d as P,e as z,f as te,g as ie,h as fe}from"./chunk-AUKFKAMK.js";import{b as xe,c as oe}from"./chunk-EB3BIPWW.js";import{b as q,c as G,d as Q,f as U,h as J,i as K,n as X,o as Y,p as Z,q as $,r as ee}from"./chunk-ZXV3WCDO.js";import{Ca as o,Cc as me,Da as n,Ea as L,Fa as T,Ga as I,Ia as M,Ja as C,Ka as b,M as V,Qa as k,R as u,Ra as F,S as g,Sa as O,Sc as pe,Ta as D,Tc as ue,Ua as l,Uc as ge,Vc as he,Wa as v,Wc as _e,Ya as w,Za as x,_a as S,ab as W,bb as R,ea as c,fa as A,ic as ne,jc as re,mc as ae,nc as le,qc as se,rc as ce,sa as f,ua as p,uc as de,za as y}from"./chunk-QPT26XIT.js";import{a as B,e as we,j as h}from"./chunk-DTJZBUUZ.js";var Ce=we(xe());var E=()=>({standalone:!0});function Se(r,d){r&1&&(T(0),o(1,"div",37),L(2,"div",38),o(3,"div",39),l(4,"Cargando datos por favor espere!.."),n()(),I())}function be(r,d){r&1&&(T(0),o(1,"div",37)(2,"div",39),l(3,"No Hay Registros!.."),n()(),I())}function ye(r,d){if(r&1&&(o(0,"div")(1,"span",40),l(2),n()()),r&2){let m=d.value;c(2),v("",m," ")}}function Me(r,d){if(r&1&&(o(0,"div")(1,"span",40),l(2),n()()),r&2){let m=d.value;c(2),v("",m," ")}}function ve(r,d){if(r&1&&(o(0,"div")(1,"span",40),l(2),n()()),r&2){let m=d.value;c(2),v("",m," ")}}function Re(r,d){if(r&1&&(o(0,"div")(1,"span",40),l(2),n()()),r&2){let m=d.value;c(2),v("",m," ")}}function Ee(r,d){if(r&1&&(o(0,"div")(1,"span",40),l(2),n()()),r&2){let m=d.value;c(2),v("",m," ")}}function Pe(r,d){if(r&1){let m=M();o(0,"c-badge",41),C("click",function(){let e=u(m).row,t=b();return g(t.Eliminar(e))}),l(1,"Eliminar"),n(),l(2," \xA0 "),o(3,"c-badge",42),C("click",function(){let e=u(m).row,t=b();return g(t.ModalActualizar("verticallyCenteredModal",e))}),l(4,"Actualziar"),n()}}function Ae(r,d){if(r&1){let m=M();o(0,"div",27)(1,"div",28)(2,"label",29),l(3,"Seleccione Tramite"),n(),o(4,"ngx-select",43),S("ngModelChange",function(e){u(m);let t=b();return x(t.xRegistroBitacora.tramite,e)||(t.xRegistroBitacora.tramite=e),g(e)}),n()()()}if(r&2){let m=b();c(4),p("items",m.tramite),w("ngModel",m.xRegistroBitacora.tramite),p("ngModelOptions",R(3,E))}}function Te(r,d){if(r&1){let m=M();o(0,"button",44),C("click",function(){u(m);let e=b();return g(e.Registrar())}),l(1,"Registrar Solicitud"),n()}}function Ie(r,d){if(r&1){let m=M();o(0,"button",45),C("click",function(){u(m);let e=b();return g(e.Actualizar())}),l(1,"Actualizar Solicitud"),n()}}var ze=(()=>{let d=class d{constructor(i,e){this.apiService=i,this.swal=e,this.selectedOption=10,this.ColumnMode=j,this.selected=[],this.ListasSolicitudes=[],this.rows=[],this.temp=[],this.search="",this.xAPI={funcion:"",parametros:"",valores:{}},this.xRegistroBitacora={fecha:"",id_cc:0,departamento:0,tramite:0,horario:0},this.horario=[],this.genero=[],this.paises=[],this.tipo=[],this.departamento=[],this.tramite=[],this.ListarCiudadanos=[],this.btnShow=!1,this.loadingTable=0,this.showTramite=!1}ngOnInit(){return h(this,null,function*(){yield this.ListaCiudadano(),yield this.ListaSolicitudes(),yield this.ListaHorarios(),yield this.ListaGenero(),yield this.ListaNaciones(),yield this.ListaTipo(),yield this.ListaDepartamento()})}ListaSolicitudes(){return h(this,null,function*(){this.xAPI.funcion="MPPRE_R_Solicitudes",this.xAPI.parametros="",this.xAPI.valores="",this.apiService.Ejecutar(this.xAPI).subscribe(i=>{i.Cuerpo.length>0?(this.loadingTable=1,i.Cuerpo.map(e=>{e.ciudadano=e.tipo_documento+"-"+e.documento+" "+e.nombres+" "+e.apellidos,this.ListasSolicitudes.push(e)}),this.rows=this.ListasSolicitudes,this.temp=this.rows):this.loadingTable=2},i=>{console.log(i)})})}filter(i){let e=i.target.value.toLowerCase(),t=this.temp.filter(function(s){});this.rows=t}ListaCiudadano(){return h(this,null,function*(){this.xAPI.funcion="MPPRE_R_Ciudadanos",this.xAPI.parametros="",this.xAPI.valores="",this.apiService.Ejecutar(this.xAPI).subscribe(i=>{i.Cuerpo.length>0&&(this.ListarCiudadanos=i.Cuerpo.map(e=>(e.ciudadano=e.tipo_documento+"-"+e.documento+" | "+e.nombres+" "+e.apellidos+" | "+e.iso+"-"+e.pais+" | "+e.sexo+" | "+e.telefono,e)))})})}ListaHorarios(){return h(this,null,function*(){this.xAPI.funcion="MPPRE_R_Horarios",this.xAPI.parametros="",this.xAPI.valores="",this.apiService.Ejecutar(this.xAPI).subscribe(i=>{if(i.Cuerpo.length>0)return this.horario=i.Cuerpo})})}ListaGenero(){return h(this,null,function*(){this.xAPI.funcion="MPPRE_R_Genero",this.xAPI.parametros="",this.xAPI.valores="",this.apiService.Ejecutar(this.xAPI).subscribe(i=>{if(i.Cuerpo.length>0)return this.genero=i.Cuerpo})})}ListaNaciones(){return h(this,null,function*(){this.xAPI.funcion="MPPRE_R_Paises",this.xAPI.parametros="",this.xAPI.valores="",this.apiService.Ejecutar(this.xAPI).subscribe(i=>{if(i.Cuerpo.length>0)return this.paises=i.Cuerpo})})}ListaTipo(){return h(this,null,function*(){this.xAPI.funcion="MPPRE_R_TipoDocumento",this.xAPI.parametros="",this.xAPI.valores="",this.apiService.Ejecutar(this.xAPI).subscribe(i=>{i.Cuerpo.length>0&&(this.tipo=i.Cuerpo.map(e=>(e.xnombre=e.nombre+" | "+e.descripcion,e)))})})}ListaDepartamento(){return h(this,null,function*(){this.xAPI.funcion="MPPRE_R_Departamento",this.xAPI.parametros="",this.xAPI.valores="",this.apiService.Ejecutar(this.xAPI).subscribe(i=>{if(i.Cuerpo.length>0)return this.departamento=i.Cuerpo.filter(e=>e.status===1)})})}ListaTramite(i){return h(this,null,function*(){this.tramite=[],i!=null&&(this.xAPI.funcion="MPPRE_R_Tramite",this.xAPI.parametros=`${i}`,this.xAPI.valores="",this.apiService.Ejecutar(this.xAPI).subscribe(e=>{if(e.Cuerpo.length>0)return this.showTramite=!0,this.tramite=e.Cuerpo.filter(t=>t.status===1)})),this.showTramite=!1})}closeModal(i){this.btnShow=!1;let e=document.getElementById(i),t=document.querySelector(".modal-backdrop");e&&t&&(e.style.display="none",t.remove(),this.LimpiarFormulario())}openModal(i,e){this.btnShow=!1;let t=document.getElementById(i);if(t){t.style.display="block",t.setAttribute("aria-hidden","false"),t.classList.add("show");let s=document.createElement("div");s.classList.add("modal-backdrop","show"),document.body.appendChild(s)}}LimpiarFormulario(){this.xRegistroBitacora={horario:0,fecha:"",id_cc:0,departamento:0,tramite:0}}Registrar(){return h(this,null,function*(){this.xAPI.funcion="MPPRE_C_Solicitudes",this.xAPI.parametros="",this.xAPI.valores=JSON.stringify(this.xRegistroBitacora),yield this.apiService.Ejecutar(this.xAPI).subscribe({next:i=>{i.tipo==1?(this.swal.Swal1("top-end","success","<h5><strong>Registrado Exitosamente!</strong></h5>",3e3),this.ListasSolicitudes=[],this.rows=[],this.ListaSolicitudes(),this.LimpiarFormulario(),this.closeModal("verticallyCenteredModal")):this.swal.SwalMini("top-end","error","Oops! Algo salio mal!...",3e3)},error:i=>{console.log(i)}})})}Eliminar(i){let e=B({},i);Ce.default.fire({title:"Est\xE1 seguro de eliminar?",html:`<strong><font color="red">${e.nombres} ${e.apellidos}</font></strong>  </br> Tenga en cuenta que no podr\xE1s revertir esto!`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, Eliminalo!",cancelButtonText:"Cancelar"}).then(t=>{t.isConfirmed&&(this.xAPI.funcion="MPPRE_D_Solicitudes",this.xAPI.parametros=`${e.id}`,this.xAPI.valores="",this.apiService.Ejecutar(this.xAPI).subscribe({next:s=>{s.tipo==1?(this.swal.Swal1("top-end","success",`<h5><strong><font color="red">${e.nombres} ${e.apellidos} </font></strong> </br> Eliminado Exitosamente!</h5>`,3e3),this.ListasSolicitudes=[],this.rows=[],this.ListaSolicitudes()):this.swal.SwalMini("top-end","error","Oops! Algo salio mal!...",3e3)},error:s=>{console.log(s),this.swal.SwalMini("top-end","error","Oops! Algo salio mal!...",3e3)}}))})}ModalActualizar(i,e){this.xRegistroBitacora.id=e.id,this.btnShow=!0;let t=document.getElementById(i);if(this.xRegistroBitacora=e,t){t.style.display="block",t.setAttribute("aria-hidden","false"),t.classList.add("show");let s=document.createElement("div");s.classList.add("modal-backdrop","show"),document.body.appendChild(s)}}Actualizar(){return h(this,null,function*(){this.xAPI.funcion="MPPRE_U_Solicitudes",this.xAPI.parametros="",this.xAPI.valores=JSON.stringify(this.xRegistroBitacora),yield this.apiService.Ejecutar(this.xAPI).subscribe({next:i=>{i.tipo==1?(this.swal.Swal1("top-end","success","<h5><strong>Actualizado Exitosamente!</strong> </h5>",3e3),this.ListasSolicitudes=[],this.rows=[],this.ListaSolicitudes(),this.LimpiarFormulario(),this.closeModal("verticallyCenteredModal")):this.swal.SwalMini("top-end","error","Oops! Algo salio mal!...",3e3)},error:i=>{console.log(i)}})})}};d.\u0275fac=function(e){return new(e||d)(A(oe),A(fe))},d.\u0275cmp=V({type:d,selectors:[["app-register"]],viewQuery:function(e,t){if(e&1&&k(P,5),e&2){let s;F(s=O())&&(t.table=s.first)}},standalone:!0,features:[W],decls:75,vars:36,consts:[["verticallyCenteredModal",""],[1,"mb-4"],["size","sm","cButton","",3,"cModalToggle"],[1,"row"],[1,"col-md-6","col-12"],[1,"d-flex","justify-content-between","align-items-center","m-1"],[1,"d-flex","align-items-center"],[1,"form-control","mx-25",3,"ngModelChange","ngModel"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"col-md-6","col-12","d-flex","justify-content-start","justify-content-md-end"],[1,"d-flex","align-items-center","justify-content-end","pr-1","pb-1","pb-md-0"],[1,"d-flex","align-items-center","ml-1","ml-md-0"],["name","searchValue","type","search","placeholder","Buscar",1,"form-control","ml-25",3,"ngModelChange","keyup","search","ngModel"],["rowHeight","auto",1,"bootstrap","core-bootstrap",3,"rows","limit","columnMode","headerHeight","footerHeight","scrollbarH"],["name","Nombres Apellidos","prop","ciudadano",3,"width"],["ngx-datatable-cell-template",""],["name","Horario","prop","horariox",3,"width"],["name","Fecha","prop","fecha",3,"width"],["name","Departamento","prop","departamentox",3,"width"],["name","Tramite","prop","tramitex",3,"width"],["name","Accion",3,"sortable","width"],["size","lg","alignment","center","id","verticallyCenteredModal"],["cModalTitle",""],["cButtonClose","",3,"click"],[1,"row","mb-3"],[1,"col"],[1,"form-label"],["optionValueField","id","optionTextField","ciudadano","placeholder","Seleccione Ciudadano","required","","autocomplete","off",3,"ngModelChange","items","ngModel","ngModelOptions"],["optionValueField","id","optionTextField","nombre","placeholder","Seleccione Horario","required","","autocomplete","off",3,"ngModelChange","items","ngModel","ngModelOptions"],["placeholder","Fecha","type","date",1,"form-control",3,"ngModelChange","ngModel","ngModelOptions"],["optionValueField","id","optionTextField","nombre","placeholder","Seleccione Departamento","required","","autocomplete","off",3,"ngModelChange","items","ngModel","ngModelOptions"],["cButton","","color","secondary",3,"click"],["cButton","","color","primary"],["cButton","","color","warning"],[1,"loading-overlay"],["role","status",1,"spinner-border"],[1,"loading-message"],[1,"font-weight-bold"],["color","danger",3,"click"],["color","warning",3,"click"],["optionValueField","id","optionTextField","nombre","placeholder","Seleccione Tramite","required","","autocomplete","off",3,"ngModelChange","items","ngModel","ngModelOptions"],["cButton","","color","primary",3,"click"],["cButton","","color","warning",3,"click"]],template:function(e,t){if(e&1){let s=M();o(0,"c-card",1)(1,"c-card-header"),l(2," Lista de Usuarios "),o(3,"button",2),l(4,"Agregar Registro"),n()(),o(5,"c-card-body")(6,"div")(7,"div",3)(8,"div",4)(9,"div",5)(10,"label",6),l(11,"Mostrar "),o(12,"select",7),S("ngModelChange",function(a){return u(s),x(t.selectedOption,a)||(t.selectedOption=a),g(a)}),o(13,"option",8),l(14,"10"),n(),o(15,"option",9),l(16,"25"),n(),o(17,"option",10),l(18,"50"),n(),o(19,"option",11),l(20,"100"),n()(),l(21," Registros"),n()()(),o(22,"div",12)(23,"div",13)(24,"label",14),l(25,"Buscar:"),o(26,"input",15),S("ngModelChange",function(a){return u(s),x(t.search,a)||(t.search=a),g(a)}),C("keyup",function(a){return u(s),g(t.filter(a))})("search",function(a){return u(s),g(t.filter(a))}),n()()()()(),f(27,Se,5,0,"ng-container")(28,be,4,0,"ng-container"),o(29,"ngx-datatable",16)(30,"ngx-datatable-column",17),f(31,ye,3,1,"ng-template",18),n(),o(32,"ngx-datatable-column",19),f(33,Me,3,1,"ng-template",18),n(),o(34,"ngx-datatable-column",20),f(35,ve,3,1,"ng-template",18),n(),o(36,"ngx-datatable-column",21),f(37,Re,3,1,"ng-template",18),n(),o(38,"ngx-datatable-column",22),f(39,Ee,3,1,"ng-template",18),n(),o(40,"ngx-datatable-column",23),f(41,Pe,5,0,"ng-template",18),n()()()()(),o(42,"c-modal",24,0)(44,"c-modal-header")(45,"h5",25),l(46,"Formulario de Registro"),n(),o(47,"button",26),C("click",function(){return u(s),g(t.closeModal("verticallyCenteredModal"))}),n()(),o(48,"c-modal-body")(49,"form")(50,"div",27)(51,"div",28)(52,"label",29),l(53,"Seleccione Ciudadano"),n(),o(54,"ngx-select",30),S("ngModelChange",function(a){return u(s),x(t.xRegistroBitacora.id_cc,a)||(t.xRegistroBitacora.id_cc=a),g(a)}),n()()(),o(55,"div",27)(56,"div",28)(57,"label",29),l(58,"Seleccione Horario"),n(),o(59,"ngx-select",31),S("ngModelChange",function(a){return u(s),x(t.xRegistroBitacora.horario,a)||(t.xRegistroBitacora.horario=a),g(a)}),n()(),o(60,"div",28)(61,"label",29),l(62,"Fecha"),n(),o(63,"input",32),S("ngModelChange",function(a){return u(s),x(t.xRegistroBitacora.fecha,a)||(t.xRegistroBitacora.fecha=a),g(a)}),n()()(),o(64,"div",27)(65,"div",28)(66,"label",29),l(67,"Seleccione Departamento"),n(),o(68,"ngx-select",33),S("ngModelChange",function(a){return u(s),x(t.xRegistroBitacora.departamento,a)||(t.xRegistroBitacora.departamento=a),g(a)}),C("ngModelChange",function(a){return u(s),g(t.ListaTramite(a))}),n()()(),f(69,Ae,5,4,"div",27),n()(),o(70,"c-modal-footer")(71,"button",34),C("click",function(){return u(s),g(t.closeModal("verticallyCenteredModal"))}),l(72," Cerrar "),n(),f(73,Te,2,0,"button",35)(74,Ie,2,0,"button",36),n()()}if(e&2){let s=D(43);c(3),p("cModalToggle",s.id),c(9),w("ngModel",t.selectedOption),c(14),w("ngModel",t.search),c(),y(27,t.loadingTable==0?27:-1),c(),y(28,t.loadingTable==2?28:-1),c(),p("rows",t.rows)("limit",t.selectedOption)("columnMode",t.ColumnMode.force)("headerHeight",50)("footerHeight",50)("scrollbarH",!0),c(),p("width",300),c(2),p("width",100),c(2),p("width",100),c(2),p("width",100),c(2),p("width",200),c(2),p("sortable",!1)("width",100),c(14),p("items",t.ListarCiudadanos),w("ngModel",t.xRegistroBitacora.id_cc),p("ngModelOptions",R(32,E)),c(5),p("items",t.horario),w("ngModel",t.xRegistroBitacora.horario),p("ngModelOptions",R(33,E)),c(4),w("ngModel",t.xRegistroBitacora.fecha),p("ngModelOptions",R(34,E)),c(5),p("items",t.departamento),w("ngModel",t.xRegistroBitacora.departamento),p("ngModelOptions",R(35,E)),c(),y(69,t.showTramite?69:-1),c(4),y(73,t.btnShow?-1:73),c(),y(74,t.btnShow?74:-1)}},dependencies:[z,P,H,N,se,re,ie,te,de,ee,K,Y,Z,q,X,G,Q,$,J,U,ce,_e,he,pe,ge,ne,ue,me,le,ae]});let r=d;return r})();export{ze as RegisterComponent};
